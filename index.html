<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#111111" />
  <title>Universal Calculator</title>
  <script>
    (function() {
      try {
        var localTheme = localStorage.getItem("theme");
        var supportDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches;
        if (localTheme === "dark" || (!localTheme && supportDarkMode)) {
          document.documentElement.setAttribute("data-theme", "dark");
        }
      } catch (e) {}
    })();
  </script>
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json" />
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
  </script>
  <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
  </script>
</head>

<body>
  <!-- SVG Sprite Sheet -->
  <svg style="display: none;">
    <symbol id="icon-menu" viewBox="0 0 24 24">
      <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" fill="currentColor" />
    </symbol>
    <symbol id="icon-chevron-down" viewBox="0 0 24 24">
      <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z" fill="currentColor" />
    </symbol>
    <symbol id="icon-calc" viewBox="0 0 24 24">
      <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z"
        fill="currentColor" />
      <path
        d="M7 7h2v2H7zm4 0h2v2h-2zm4 0h2v2h-2zM7 11h2v2H7zm4 0h2v2h-2zm4 0h2v2h-2zM7 15h2v2H7zm4 0h2v2h-2zm4 0h2v2h-2z"
        fill="currentColor" />
    </symbol>
    <symbol id="icon-math" viewBox="0 0 24 24">
      <path
        d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14h-2v-4H6v-2h4V7h2v4h4v2h-4v4z"
        fill="currentColor" />
    </symbol>
    <symbol id="icon-physics" viewBox="0 0 24 24">
      <path
        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"
        fill="currentColor" />
      <circle cx="12" cy="12" r="3" fill="currentColor" />
    </symbol>
    <symbol id="icon-converter" viewBox="0 0 24 24">
      <path
        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14H9v-2h2v2zm0-4H9V8h2v4zm4 4h-2v-2h2v2zm0-4h-2V8h2v4z"
        fill="currentColor" />
    </symbol>
    <symbol id="icon-chemistry" viewBox="0 0 24 24">
      <path
        d="M19.46 20l-3.4-6.4V6h-1V4h4v2h-1v7.6l3.4 6.4c.6 1.1-.2 2.4-1.4 2.4H5.94c-1.2 0-2-1.3-1.4-2.4l3.4-6.4V6H7V4h4v2H9v7.6l-3.4 6.4h13.86z"
        fill="currentColor" />
    </symbol>
    <symbol id="icon-statistics" viewBox="0 0 24 24">
      <path d="M10 20h4V4h-4v16zm-6 0h4v-8H4v8zM16 9v11h4V9h-4z" fill="currentColor" />
    </symbol>
    <symbol id="icon-sun" viewBox="0 0 24 24">
      <path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z" fill="currentColor"/>
    </symbol>
    <symbol id="icon-moon" viewBox="0 0 24 24">
      <path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-3.03 0-5.5-2.47-5.5-5.5 0-1.82.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z" fill="currentColor"/>
    </symbol>
    <symbol id="icon-search" viewBox="0 0 24 24">
      <path
        d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
        fill="currentColor" />
    </symbol>
      <symbol id="icon-settings" viewBox="0 0 24 24"><path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.04.24.24.41.48.41h3.84c.24 0 .43-.17.47-.41l.36-2.54c.59-.24 1.13-.57 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.08-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z" fill="currentColor"/></symbol>
    <symbol id="icon-theme-enhanced" viewBox="0 0 48 48"><rect x="4" y="4" width="40" height="40" rx="4" fill="#000000" /><rect x="10" y="12" width="28" height="4" rx="2" fill="#00E676" /><rect x="10" y="20" width="28" height="4" rx="2" fill="#00E5FF" /><rect x="10" y="28" width="28" height="4" rx="2" fill="#FF5722" /></symbol>
    <symbol id="icon-theme-medium" viewBox="0 0 48 48"><rect x="4" y="4" width="40" height="40" rx="4" fill="#121212" /><rect x="10" y="12" width="28" height="4" rx="2" fill="#3B82F6" /><rect x="10" y="20" width="28" height="4" rx="2" fill="#60A5FA" /><rect x="10" y="28" width="28" height="4" rx="2" fill="#93C5FD" /></symbol>
    <symbol id="icon-theme-gentle" viewBox="0 0 48 48"><rect x="4" y="4" width="40" height="40" rx="4" fill="#252525" /><rect x="10" y="12" width="28" height="4" rx="2" fill="#A0A0A0" /><rect x="10" y="20" width="28" height="4" rx="2" fill="#C0C0C0" /><rect x="10" y="28" width="28" height="4" rx="2" fill="#E0E0E0" /></symbol>
  </svg>

  <div class="app-layout">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="logo">
        <svg class="icon-logo">
          <use href="#icon-calc"></use>
        </svg>
        <span>Universal Calculator</span>
      </div>
      <nav id="sidebar-nav" class="nav-menu">
        <!-- Navigation will be injected here by JS -->
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="content-area">
      <header class="top-bar">

        <div class="search-container">
          <div class="search-wrapper">
            <svg class="search-icon">
              <use href="#icon-search"></use>
            </svg>
            <input type="text" id="calc-search" placeholder="Search calculators...">
          </div>
        </div>
        <button id="settings-btn" class="settings-btn" aria-label="Theme Settings"><svg class="icon"><use href="#icon-settings"></use></svg></button>
        <button id="theme-toggle" class="theme-toggle" aria-label="Toggle Dark Mode">
          <svg class="icon">
            <use href="#icon-moon"></use>
          </svg>
        </button>
        <div id="network-status" class="network-status online">
          <span class="status-dot"></span>
          <span class="status-text">Online</span>
        </div>
      </header>

      <div id="calculator-display">
        <div class="welcome-screen">
          <h2>Select a Tool</h2>
          <p>Choose a calculator from the sidebar to get started.</p>
        </div>
      </div>
    </main>
  </div>

  <button id="mobile-menu-btn" aria-label="Toggle Menu">
    <svg class="icon">
      <use href="#icon-menu"></use>
    </svg>
  </button>

  <div id="settings-modal" class="modal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">Theme Settings</h3><button id="close-modal" class="modal-close">&times;</button></div><p class="converter-panel-header" style="margin-bottom: 1rem;">Dark Theme Variant</p><div class="theme-options"><div class="theme-card" data-variant="enhanced" role="button" tabindex="0"><div class="theme-preview" style="background: #000; color: #fff;"><svg style="width: 80%; height: 80%;"><use href="#icon-theme-enhanced"></use></svg></div><span class="theme-label">Enhanced</span></div><div class="theme-card" data-variant="medium" role="button" tabindex="0"><div class="theme-preview" style="background: #121212; color: #e0e0e0;"><svg style="width: 80%; height: 80%;"><use href="#icon-theme-medium"></use></svg></div><span class="theme-label">Medium</span></div><div class="theme-card" data-variant="gentle" role="button" tabindex="0"><div class="theme-preview" style="background: #252525; color: #e0e0e0;"><svg style="width: 80%; height: 80%;"><use href="#icon-theme-gentle"></use></svg></div><span class="theme-label">Gentle</span></div></div></div></div>
  <script type="module" src="js/core.js"></script>
  <script>
    // Register Service Worker (requires HTTP/HTTPS, skip on file://)
    if ('serviceWorker' in navigator && location.protocol !== 'file:') {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js')
          .then(reg => console.log('SW registered:', reg.scope))
          .catch(err => console.warn('SW registration failed:', err));
      });
    }

    // Online/Offline status indicator
    function updateNetworkStatus() {
      const el = document.getElementById('network-status');
      if (!el) return;
      if (navigator.onLine) {
        el.className = 'network-status online';
        el.querySelector('.status-text').textContent = 'Online';
      } else {
        el.className = 'network-status offline';
        el.querySelector('.status-text').textContent = 'Offline';
      }
    }
    window.addEventListener('online', updateNetworkStatus);
    window.addEventListener('offline', updateNetworkStatus);
    window.addEventListener('load', updateNetworkStatus);
  </script>
</body>

</html>